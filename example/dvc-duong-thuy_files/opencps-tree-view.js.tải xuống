Liferay.provide(window,"buildTreeView",function(m,e,n,o,l,a,f,h,c,k,b,d){var g=AUI();if(g.one("#"+m)!="undefined"&&g.one("#"+m)!=null){if(d=="true"){g.one("#"+m).addClass("loading-lemon-tree")}var p=JSON.parse(o);var l=Liferay.PortletURL.createURL(l);l.setParameter("mvcPath",a);l.setWindowState(f);l.setPortletMode(h);var i=new g.TreeViewDD({boundingBox:"#"+m,children:JSON.parse(n),on:{render:function(){var q=g.all(".tree-node")}}}).render();setTimeout(function(){var q={};for(j in p){q[b+j]=p[j]}if(c!=null){g.io.request(c,{dataType:"json",data:q,on:{start:function(){console.log("menu js sleep start!")},success:function(t,u,x){var A=this;var z=A.get("responseData");if(z){var y=z.badge;for(j in y){var B=y[j].code;var v=y[j].counter;if(g.one("#"+B)!="undefined"&&g.one("#"+B)!=null){var w=g.one("#"+B);if(w.getAttribute("id")===k){w.addClass("current")}w.appendChild("<span class='badge pull-right'>"+v+"</span>");if(d=="true"){if(v!="0"){w.setStyle("display","block")}else{w.setStyle("display","none")}}else{w.setStyle("display","block")}}}g.one("#"+m).removeClass("loading-lemon-tree")}},end:function(){console.log("menu js sleep end!")}}})}else{var s=g.one("#"+m);var r=s.all(".tree-node");r.each(function(t){if(t.getAttribute("id")===k){t.addClass("current")}else{t.removeClass("current")}t.setStyle("display","block")});g.one("#"+m).removeClass("loading-lemon-tree")}},500);i.after("lastSelectedChange",function(t){var r=t.newVal.get("id");for(j in p){var q=j;var s=p[j];if(q===e&&r.indexOf("yui_patched")<0){l.setParameter(q,r)}else{if(q===e&&r.indexOf("yui_patched")===0){l.setParameter(q,"")}else{l.setParameter(q,s)}}}window.location=l.toString()})}},["aui-tree-view","aui-base","liferay-portlet-url","aui-io"]);